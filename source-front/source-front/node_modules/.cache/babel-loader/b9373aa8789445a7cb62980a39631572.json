{"ast":null,"code":"import _classCallCheck from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from\"react\";import{Link}from\"react-router-dom\";import Input from\"./form-components/Input\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GraphQL=/*#__PURE__*/function(_Component){_inherits(GraphQL,_Component);var _super=_createSuper(GraphQL);function GraphQL(props){var _this;_classCallCheck(this,GraphQL);_this=_super.call(this,props);_this.handleChange=function(evt){var value=evt.target.value;_this.setState(function(prevState){return{searchTerm:value};});if(value.length>2){_this.performSearch();}else{_this.setState({movies:[]});}};_this.state={movies:[],isLoaded:false,error:null,alert:{type:\"d-none\",message:\"\"},searchTerm:\"\"};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(GraphQL,[{key:\"performSearch\",value:function performSearch(){var _this2=this;var payload=\"\\n        {\\n            search(titleContains: \\\"\".concat(this.state.searchTerm,\"\\\") {\\n                id\\n                title\\n                runtime\\n                year\\n                description\\n            }\\n        }\\n        \");var myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");var requestOptions={method:\"POST\",body:payload,headers:myHeaders};fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/graphql\"),requestOptions).then(function(response){return response.json();}).then(function(data){console.log(data);var theList=Object.values(data.data.search);return theList;}).then(function(theList){console.log(theList);if(theList.length>0){_this2.setState({movies:theList});}else{_this2.setState({movies:[]});}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;var payload=\"\\n        {\\n            list {\\n                id\\n                title\\n                runtime\\n                year\\n                description\\n            }\\n        }\\n        \";var myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");var requestOptions={method:\"POST\",body:payload,headers:myHeaders};fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/graphql\"),requestOptions).then(function(response){return response.json();}).then(function(data){console.log(data);var theList=Object.values(data.data.list);return theList;}).then(function(theList){console.log(theList);_this3.setState({movies:theList});});}},{key:\"render\",value:function render(){var movies=this.state.movies;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"GraphQL\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Input,{title:\"Search\",type:\"text\",name:\"search\",value:this.state.searchTerm,handleChange:this.handleChange}),/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:movies.map(function(m){return/*#__PURE__*/_jsxs(Link,{className:\"list-group-item list-group-item-action\",to:\"/moviesgraphql/\".concat(m.id),children:[/*#__PURE__*/_jsx(\"strong\",{children:m.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"(\",m.year,\") - \",m.runtime,\" minutes\"]}),/*#__PURE__*/_jsx(\"br\",{}),m.description.slice(0,100),\"...\"]},m.id);})})]});}}]);return GraphQL;}(Component);export{GraphQL as default};","map":{"version":3,"sources":["/home/aljani/projects/last_try/source-front/source-front/src/components/GraphQL.js"],"names":["React","Component","Fragment","Link","Input","GraphQL","props","handleChange","evt","value","target","setState","prevState","searchTerm","length","performSearch","movies","state","isLoaded","error","alert","type","message","bind","payload","myHeaders","Headers","append","requestOptions","method","body","headers","fetch","process","env","REACT_APP_API_URL","then","response","json","data","console","log","theList","Object","values","search","list","map","m","id","title","year","runtime","description","slice"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Input from \"./form-components/Input\";\n\nexport default class GraphQL extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movies: [],\n      isLoaded: false,\n      error: null,\n      alert: {\n        type: \"d-none\",\n        message: \"\",\n      },\n      searchTerm: \"\",\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange = (evt) => {\n    let value = evt.target.value;\n\n    this.setState((prevState) => ({\n      searchTerm: value,\n    }));\n\n    if (value.length > 2) {\n      this.performSearch();\n    } else {\n      this.setState({ movies: [] });\n    }\n  };\n\n  performSearch() {\n    const payload = `\n        {\n            search(titleContains: \"${this.state.searchTerm}\") {\n                id\n                title\n                runtime\n                year\n                description\n            }\n        }\n        `;\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n      method: \"POST\",\n      body: payload,\n      headers: myHeaders,\n    };\n\n    fetch(`${process.env.REACT_APP_API_URL}/v1/graphql`, requestOptions)\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        let theList = Object.values(data.data.search);\n        return theList;\n      })\n      .then((theList) => {\n        console.log(theList);\n        if (theList.length > 0) {\n          this.setState({\n            movies: theList,\n          });\n        } else {\n          this.setState({\n            movies: [],\n          });\n        }\n      });\n  }\n\n  componentDidMount() {\n    const payload = `\n        {\n            list {\n                id\n                title\n                runtime\n                year\n                description\n            }\n        }\n        `;\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n      method: \"POST\",\n      body: payload,\n      headers: myHeaders,\n    };\n\n    fetch(`${process.env.REACT_APP_API_URL}/v1/graphql`, requestOptions)\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        let theList = Object.values(data.data.list);\n        return theList;\n      })\n      .then((theList) => {\n        console.log(theList);\n        this.setState({\n          movies: theList,\n        });\n      });\n  }\n\n  render() {\n    let { movies } = this.state;\n    return (\n      <Fragment>\n        <h2>GraphQL</h2>\n        <hr />\n\n        <Input\n          title={\"Search\"}\n          type={\"text\"}\n          name={\"search\"}\n          value={this.state.searchTerm}\n          handleChange={this.handleChange}\n        />\n\n        <div className=\"list-group\">\n          {movies.map((m) => (\n            <Link\n              key={m.id}\n              className=\"list-group-item list-group-item-action\"\n              to={`/moviesgraphql/${m.id}`}\n            >\n              <strong>{m.title}</strong>\n              <br />\n              <small className=\"text-muted\">\n                ({m.year}) - {m.runtime} minutes\n              </small>\n              <br />\n              {m.description.slice(0, 100)}...\n            </Link>\n          ))}\n        </div>\n      </Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}