{"ast":null,"code":"import _classCallCheck from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from\"react\";import{Link}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Admin=/*#__PURE__*/function(_Component){_inherits(Admin,_Component);var _super=_createSuper(Admin);function Admin(){var _this;_classCallCheck(this,Admin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movies:[],isLoaded:false,error:null};return _this;}_createClass(Admin,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.jwt===\"\"){this.props.history.push({pathname:\"/login\"});return;}fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/movies\")).then(function(response){if(response.status!==\"200\"){var err=Error;err.message=\"Invalid response code: \"+response.status;_this2.setState({error:err});}return response.json();}).then(function(json){_this2.setState({movies:json.movies,isLoaded:true},function(error){_this2.setState({isLoaded:true,error:error});});});}},{key:\"render\",value:function render(){var _this$state=this.state,movies=_this$state.movies,isLoaded=_this$state.isLoaded,error=_this$state.error;if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}else{return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Catalogue\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:movies.map(function(m){return/*#__PURE__*/_jsx(Link,{className:\"list-group-item list-group-item-action\",to:\"/admin/movie/\".concat(m.id),children:m.title},m.id);})})]});}}}]);return Admin;}(Component);export{Admin as default};","map":{"version":3,"sources":["/home/aljani/projects/last_try/source-front/source-front/src/components/Admin.js"],"names":["React","Component","Fragment","Link","Admin","state","movies","isLoaded","error","props","jwt","history","push","pathname","fetch","process","env","REACT_APP_API_URL","then","response","status","err","Error","message","setState","json","map","m","id","title"],"mappings":"4qBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,C,2FAEqBC,CAAAA,K,uTACnBC,K,CAAQ,CACNC,MAAM,CAAE,EADF,CAENC,QAAQ,CAAE,KAFJ,CAGNC,KAAK,CAAE,IAHD,C,kEAMR,4BAAoB,iBAClB,GAAI,KAAKC,KAAL,CAAWC,GAAX,GAAmB,EAAvB,CAA2B,CACzB,KAAKD,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,CAAwB,CACtBC,QAAQ,CAAE,QADY,CAAxB,EAGA,OACD,CAEDC,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,eAAL,CACGC,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,KAAxB,CAA+B,CAC7B,GAAIC,CAAAA,GAAG,CAAGC,KAAV,CACAD,GAAG,CAACE,OAAJ,CAAc,0BAA4BJ,QAAQ,CAACC,MAAnD,CACA,MAAI,CAACI,QAAL,CAAc,CAAEhB,KAAK,CAAEa,GAAT,CAAd,EACD,CACD,MAAOF,CAAAA,QAAQ,CAACM,IAAT,EAAP,CACD,CARH,EASGP,IATH,CASQ,SAACO,IAAD,CAAU,CACd,MAAI,CAACD,QAAL,CACE,CACElB,MAAM,CAAEmB,IAAI,CAACnB,MADf,CAEEC,QAAQ,CAAE,IAFZ,CADF,CAKE,SAACC,KAAD,CAAW,CACT,MAAI,CAACgB,QAAL,CAAc,CACZjB,QAAQ,CAAE,IADE,CAEZC,KAAK,CAALA,KAFY,CAAd,EAID,CAVH,EAYD,CAtBH,EAuBD,C,sBAED,iBAAS,CACP,gBAAoC,KAAKH,KAAzC,CAAQC,MAAR,aAAQA,MAAR,CAAgBC,QAAhB,aAAgBA,QAAhB,CAA0BC,KAA1B,aAA0BA,KAA1B,CACA,GAAIA,KAAJ,CAAW,CACT,mBAAO,iCAAaA,KAAK,CAACe,OAAnB,GAAP,CACD,CAFD,IAEO,IAAI,CAAChB,QAAL,CAAe,CACpB,mBAAO,iCAAP,CACD,CAFM,IAEA,CACL,mBACE,MAAC,QAAD,yBACE,wCADF,cAEE,aAFF,cAGE,YAAK,SAAS,CAAC,YAAf,UACGD,MAAM,CAACoB,GAAP,CAAW,SAACC,CAAD,qBACV,KAAC,IAAD,EAEE,SAAS,CAAC,wCAFZ,CAGE,EAAE,wBAAkBA,CAAC,CAACC,EAApB,CAHJ,UAKGD,CAAC,CAACE,KALL,EACOF,CAAC,CAACC,EADT,CADU,EAAX,CADH,EAHF,GADF,CAiBD,CACF,C,mBAjEgC3B,S,SAAdG,K","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class Admin extends Component {\n  state = {\n    movies: [],\n    isLoaded: false,\n    error: null,\n  };\n\n  componentDidMount() {\n    if (this.props.jwt === \"\") {\n      this.props.history.push({\n        pathname: \"/login\",\n      });\n      return;\n    }\n    \n    fetch(`${process.env.REACT_APP_API_URL}/v1/movies`)\n      .then((response) => {\n        if (response.status !== \"200\") {\n          let err = Error;\n          err.message = \"Invalid response code: \" + response.status;\n          this.setState({ error: err });\n        }\n        return response.json();\n      })\n      .then((json) => {\n        this.setState(\n          {\n            movies: json.movies,\n            isLoaded: true,\n          },\n          (error) => {\n            this.setState({\n              isLoaded: true,\n              error,\n            });\n          }\n        );\n      });\n  }\n\n  render() {\n    const { movies, isLoaded, error } = this.state;\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <p>Loading...</p>;\n    } else {\n      return (\n        <Fragment>\n          <h2>Manage Catalogue</h2>\n          <hr />\n          <div className=\"list-group\">\n            {movies.map((m) => (\n              <Link\n                key={m.id}\n                className=\"list-group-item list-group-item-action\"\n                to={`/admin/movie/${m.id}`}\n              >\n                {m.title}\n              </Link>\n            ))}\n          </div>\n        </Fragment>\n      );\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}