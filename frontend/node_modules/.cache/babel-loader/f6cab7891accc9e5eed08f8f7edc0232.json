{"ast":null,"code":"import _classCallCheck from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/aljani/projects/last_try/source-front/source-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var OneMovieGraphQL=/*#__PURE__*/function(_Component){_inherits(OneMovieGraphQL,_Component);var _super=_createSuper(OneMovieGraphQL);function OneMovieGraphQL(){var _this;_classCallCheck(this,OneMovieGraphQL);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={movie:{},isLoaded:false,error:null};return _this;}_createClass(OneMovieGraphQL,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var payload=\"\\n    {\\n        movie(id: \".concat(this.props.match.params.id,\") {\\n            id\\n            title\\n            runtime\\n            year\\n            description\\n            release_date\\n            rating\\n            mpaa_rating\\n            poster\\n        }\\n    }\\n    \");var myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");var requestOptions={method:\"POST\",body:payload,headers:myHeaders};fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/graphql\"),requestOptions).then(function(response){return response.json();}).then(function(data){_this2.setState({movie:data.data.movie,isLoaded:true});});}},{key:\"render\",value:function render(){var _this$state=this.state,movie=_this$state.movie,isLoaded=_this$state.isLoaded,error=_this$state.error;if(movie.genres){movie.genres=Object.values(movie.genres);}else{movie.genres=[];}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}else{return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Movie: \",movie.title,\" (\",movie.year,\")\"]}),movie.poster!==\"\"&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w200\".concat(movie.poster),alt:\"poster\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"float-start\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Rating: \",movie.mpaa_rating]})}),/*#__PURE__*/_jsx(\"div\",{className:\"float-end\",children:movie.genres.map(function(m,index){return/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary me-1\",children:m},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-compact table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Title:\"})}),/*#__PURE__*/_jsx(\"td\",{children:movie.title})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"})}),/*#__PURE__*/_jsx(\"td\",{children:movie.description})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Run time:\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[movie.runtime,\" minutes\"]})]})]})]})]});}}}]);return OneMovieGraphQL;}(Component);export{OneMovieGraphQL as default};","map":{"version":3,"sources":["/home/aljani/projects/last_try/source-front/source-front/src/components/OneMovieGraphQL.js"],"names":["React","Component","Fragment","OneMovieGraphQL","state","movie","isLoaded","error","payload","props","match","params","id","myHeaders","Headers","append","requestOptions","method","body","headers","fetch","process","env","REACT_APP_API_URL","then","response","json","data","setState","genres","Object","values","message","title","year","poster","mpaa_rating","map","m","index","description","runtime"],"mappings":"4qBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,C,2FAEqBC,CAAAA,e,+VACnBC,K,CAAQ,CAAEC,KAAK,CAAE,EAAT,CAAaC,QAAQ,CAAE,KAAvB,CAA8BC,KAAK,CAAE,IAArC,C,4EAER,4BAAoB,iBAClB,GAAMC,CAAAA,OAAO,sCAEG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAF3B,6NAAb,CAgBA,GAAMC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,OAAJ,EAAlB,CACAD,SAAS,CAACE,MAAV,CAAiB,cAAjB,CAAiC,kBAAjC,EAEA,GAAMC,CAAAA,cAAc,CAAG,CACrBC,MAAM,CAAE,MADa,CAErBC,IAAI,CAAEV,OAFe,CAGrBW,OAAO,CAAEN,SAHY,CAAvB,CAMAO,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,gBAAgDP,cAAhD,CAAL,CACGQ,IADH,CACQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADR,EAEGF,IAFH,CAEQ,SAACG,IAAD,CAAU,CACd,MAAI,CAACC,QAAL,CAAc,CACZvB,KAAK,CAAEsB,IAAI,CAACA,IAAL,CAAUtB,KADL,CAEZC,QAAQ,CAAE,IAFE,CAAd,EAID,CAPH,EAQD,C,sBAED,iBAAS,CACP,gBAAmC,KAAKF,KAAxC,CAAQC,KAAR,aAAQA,KAAR,CAAeC,QAAf,aAAeA,QAAf,CAAyBC,KAAzB,aAAyBA,KAAzB,CACA,GAAIF,KAAK,CAACwB,MAAV,CAAkB,CAChBxB,KAAK,CAACwB,MAAN,CAAeC,MAAM,CAACC,MAAP,CAAc1B,KAAK,CAACwB,MAApB,CAAf,CACD,CAFD,IAEO,CACLxB,KAAK,CAACwB,MAAN,CAAe,EAAf,CACD,CAED,GAAItB,KAAJ,CAAW,CACT,mBAAO,iCAAaA,KAAK,CAACyB,OAAnB,GAAP,CACD,CAFD,IAEO,IAAI,CAAC1B,QAAL,CAAe,CACpB,mBAAO,iCAAP,CACD,CAFM,IAEA,CACL,mBACE,MAAC,QAAD,yBACE,gCACUD,KAAK,CAAC4B,KADhB,MACyB5B,KAAK,CAAC6B,IAD/B,OADF,CAKG7B,KAAK,CAAC8B,MAAN,GAAiB,EAAjB,eACG,kCACI,YAAK,GAAG,0CAAoC9B,KAAK,CAAC8B,MAA1C,CAAR,CAA4D,GAAG,CAAC,QAAhE,EADJ,EANN,cAWE,YAAK,SAAS,CAAC,aAAf,uBACE,oCAAgB9B,KAAK,CAAC+B,WAAtB,GADF,EAXF,cAgBE,YAAK,SAAS,CAAC,WAAf,UACG/B,KAAK,CAACwB,MAAN,CAAaQ,GAAb,CAAiB,SAACC,CAAD,CAAIC,KAAJ,qBAChB,aAAM,SAAS,CAAC,yBAAhB,UACGD,CADH,EAA+CC,KAA/C,CADgB,EAAjB,CADH,EAhBF,cAuBE,YAAK,SAAS,CAAC,UAAf,EAvBF,cAyBE,aAzBF,cA2BE,eAAO,SAAS,CAAC,mCAAjB,wBACE,gBADF,cAEE,sCACE,mCACE,iCACE,kCADF,EADF,cAIE,oBAAKlC,KAAK,CAAC4B,KAAX,EAJF,GADF,cAOE,mCACE,iCACE,wCADF,EADF,cAIE,oBAAK5B,KAAK,CAACmC,WAAX,EAJF,GAPF,cAaE,mCACE,iCACE,qCADF,EADF,cAIE,sBAAKnC,KAAK,CAACoC,OAAX,cAJF,GAbF,GAFF,GA3BF,GADF,CAqDD,CACF,C,6BA1G0CxC,S,SAAxBE,e","sourcesContent":["import React, { Component, Fragment } from \"react\";\n\nexport default class OneMovieGraphQL extends Component {\n  state = { movie: {}, isLoaded: false, error: null };\n\n  componentDidMount() {\n    const payload = `\n    {\n        movie(id: ${this.props.match.params.id}) {\n            id\n            title\n            runtime\n            year\n            description\n            release_date\n            rating\n            mpaa_rating\n            poster\n        }\n    }\n    `;\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n      method: \"POST\",\n      body: payload,\n      headers: myHeaders,\n    };\n\n    fetch(`${process.env.REACT_APP_API_URL}/v1/graphql`, requestOptions)\n      .then((response) => response.json())\n      .then((data) => {\n        this.setState({\n          movie: data.data.movie,\n          isLoaded: true,\n        });\n      });\n  }\n\n  render() {\n    const { movie, isLoaded, error } = this.state;\n    if (movie.genres) {\n      movie.genres = Object.values(movie.genres);\n    } else {\n      movie.genres = [];\n    }\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return <p>Loading...</p>;\n    } else {\n      return (\n        <Fragment>\n          <h2>\n            Movie: {movie.title} ({movie.year}) \n          </h2>\n\n          {movie.poster !== \"\" && (\n              <div>\n                  <img src={`https://image.tmdb.org/t/p/w200${movie.poster}`} alt=\"poster\" />\n              </div>\n          )}\n\n          <div className=\"float-start\">\n            <small>Rating: {movie.mpaa_rating}</small>\n          </div>\n\n          \n          <div className=\"float-end\">\n            {movie.genres.map((m, index) => (\n              <span className=\"badge bg-secondary me-1\" key={index}>\n                {m}\n              </span>\n            ))}\n          </div>\n          <div className=\"clearfix\"></div>\n\n          <hr />\n\n          <table className=\"table table-compact table-striped\">\n            <thead></thead>\n            <tbody>\n              <tr>\n                <td>\n                  <strong>Title:</strong>\n                </td>\n                <td>{movie.title}</td>\n              </tr>\n              <tr>\n                <td>\n                  <strong>Description:</strong>\n                </td>\n                <td>{movie.description}</td>\n              </tr>\n              <tr>\n                <td>\n                  <strong>Run time:</strong>\n                </td>\n                <td>{movie.runtime} minutes</td>\n              </tr>\n            </tbody>\n          </table>\n        </Fragment>\n      );\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}