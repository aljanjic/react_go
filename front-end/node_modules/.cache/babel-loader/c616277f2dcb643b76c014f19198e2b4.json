{"ast":null,"code":"import _defineProperty from\"/home/aljani/projects/react_go/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/aljani/projects/react_go/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/aljani/projects/react_go/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,Fragment}from\"react\";import{Link}from\"react-router-dom\";import\"./EditMovie.css\";import Input from\"./form-components/Input\";import Select from\"./form-components/Select\";import TextArea from\"./form-components/TextArea\";import Alert from\"./ui-components/Alert\";import{confirmAlert}from\"react-confirm-alert\";import\"react-confirm-alert/src/react-confirm-alert.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function EditMovieFunc(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState({type:\"d-none\",message:\"\"}),_useState8=_slicedToArray(_useState7,2),alert=_useState8[0],setAlert=_useState8[1];var mpaaOptions=[{id:\"G\",value:\"G\"},{id:\"PG\",value:\"PG\"},{id:\"PG13\",value:\"PG13\"},{id:\"R\",value:\"R\"},{id:\"NC17\",value:\"NC17\"}];useEffect(function(){setMovie({id:0,title:\"\",release_date:\"\",mpaa_rating:\"\",rating:\"\",description:\"\"});if(props.jwt===\"\"){props.history.push({pathname:\"/login\"});return;}var id=props.match.params.id;if(id>0){fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/movie/\")+id).then(function(response){if(response.status!==200){setError(\"Invalid response: \",response.status);}else{setError(null);}return response.json();}).then(function(json){var releaseDate=new Date(json.movie.release_date);json.movie.release_date=releaseDate.toISOString().split(\"T\")[0];setMovie(json.movie);});}},[props.history,props.jwt,props.match.params.id]);var handleChange=function handleChange(){return function(evt){var value=evt.target.value;var name=evt.target.name;setMovie(_objectSpread(_objectSpread({},movie),{},_defineProperty({},name,value)));};};var handleSubmit=function handleSubmit(evt){evt.preventDefault();// do validation\nvar errors=[];if(movie.title===\"\"){errors.push(\"title\");}setErrors(errors);if(errors.length>0){return false;}// we passed, so post info\nvar data=new FormData(evt.target);var payload=Object.fromEntries(data.entries());var myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");myHeaders.append(\"Authorization\",\"Bearer \"+props.jwt);var requestOptions={method:\"POST\",body:JSON.stringify(payload),headers:myHeaders};fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/admin/editmovie\"),requestOptions).then(function(response){return response.json();}).then(function(data){if(data.error){setAlert({alert:{type:\"alert-danger\",message:data.error.message}});}else{props.history.push({pathname:\"/admin\"});}});};var confirmDelete=function confirmDelete(e){confirmAlert({title:\"Delete Movie?\",message:\"Are you sure?\",buttons:[{label:\"Yes\",onClick:function onClick(){// delete the movie\nvar myHeaders=new Headers();myHeaders.append(\"Content-Type\",\"application/json\");myHeaders.append(\"Authorization\",\"Bearer \"+props.jwt);fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/v1/admin/deletemovie/\")+movie.id,{method:\"GET\",headers:myHeaders}).then(function(response){return response.json;}).then(function(data){if(data.error){setAlert({type:\"alert-danger\",message:data.error.message});}else{setAlert({type:\"alert-success\",message:\"Movie deleted!\"});props.history.push({pathname:\"/admin\"});}});}},{label:\"No\",onClick:function onClick(){}}]});};function hasError(key){return errors.indexOf(key)!==-1;}if(error!==null){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else{return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add/Edit Movie\"}),/*#__PURE__*/_jsx(Alert,{alertType:alert.type,alertMessage:alert.message}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"id\",id:\"id\",value:movie.id,onChange:movie.id}),/*#__PURE__*/_jsx(Input,{title:\"Title\",className:hasError(\"title\")?\"is-invalid\":\"\",type:\"text\",name:\"title\",value:movie.title,handleChange:handleChange(\"title\"),errorDiv:hasError(\"title\")?\"text-danger\":\"d-none\",errorMsg:\"Please enter a title\"}),/*#__PURE__*/_jsx(Input,{title:\"Release Date\",type:\"date\",name:\"release_date\",value:movie.release_date,handleChange:handleChange(\"release_date\")}),/*#__PURE__*/_jsx(Input,{title:\"Runtime\",type:\"text\",name:\"runtime\",value:movie.runtime,handleChange:handleChange(\"runtime\")}),/*#__PURE__*/_jsx(Select,{title:\"MPAA Rating\",name:\"mpaa_rating\",options:mpaaOptions,value:movie.mpaa_rating,handleChange:handleChange(\"mpaa_rating\"),placeholder:\"Choose...\"}),/*#__PURE__*/_jsx(Input,{title:\"Rating\",type:\"text\",name:\"rating\",value:movie.rating,handleChange:handleChange(\"rating\")}),/*#__PURE__*/_jsx(TextArea,{title:\"Description\",name:\"description\",value:movie.description,rows:\"3\",handleChange:handleChange(\"description\")}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Save\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"btn btn-warning ms-1\",children:\"Cancel\"}),movie.id>0&&/*#__PURE__*/_jsx(\"a\",{href:\"#!\",onClick:function onClick(){return confirmDelete();},className:\"btn btn-danger ms-1\",children:\"Delete\"})]})]});}}export default EditMovieFunc;","map":{"version":3,"sources":["/home/aljani/projects/react_go/front-end/src/components/EditMovieFunc.js"],"names":["React","useEffect","useState","Fragment","Link","Input","Select","TextArea","Alert","confirmAlert","EditMovieFunc","props","movie","setMovie","error","setError","errors","setErrors","type","message","alert","setAlert","mpaaOptions","id","value","title","release_date","mpaa_rating","rating","description","jwt","history","push","pathname","match","params","fetch","process","env","REACT_APP_API_URL","then","response","status","json","releaseDate","Date","toISOString","split","handleChange","evt","target","name","handleSubmit","preventDefault","length","data","FormData","payload","Object","fromEntries","entries","myHeaders","Headers","append","requestOptions","method","body","JSON","stringify","headers","confirmDelete","e","buttons","label","onClick","hasError","key","indexOf","runtime"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./EditMovie.css\";\nimport Input from \"./form-components/Input\";\nimport Select from \"./form-components/Select\";\nimport TextArea from \"./form-components/TextArea\";\nimport Alert from \"./ui-components/Alert\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\n\nfunction EditMovieFunc(props) {\n    const [movie, setMovie] = useState({});\n    const [error, setError] = useState(null);\n    const [errors, setErrors] = useState([]);\n    const [alert, setAlert] = useState({type: \"d-none\", message: \"\"});\n    const mpaaOptions = [\n        { id: \"G\", value: \"G\" },\n        { id: \"PG\", value: \"PG\" },\n        { id: \"PG13\", value: \"PG13\" },\n        { id: \"R\", value: \"R\" },\n        { id: \"NC17\", value: \"NC17\" },\n    ];\n\n    useEffect(() => {\n        setMovie({\n            id: 0,\n            title: \"\",\n            release_date: \"\",\n            mpaa_rating: \"\",\n            rating: \"\",\n            description: \"\",\n        });\n        if (props.jwt === \"\") {\n            props.history.push({\n                pathname: \"/login\",\n            });\n            return;\n        }\n\n        const id = props.match.params.id;\n        if (id > 0) {\n            fetch(`${process.env.REACT_APP_API_URL}/v1/movie/` + id)\n              .then((response) => {\n                if (response.status !== 200) {\n                    setError(\"Invalid response: \", response.status);\n                } else {\n                    setError(null);\n                }\n                return response.json();\n              })\n              .then((json) => {\n                const releaseDate = new Date(json.movie.release_date);\n                json.movie.release_date = releaseDate.toISOString().split(\"T\")[0];\n                setMovie(json.movie);\n              });\n          }\n\n    }, [props.history, props.jwt, props.match.params.id])\n\n    const handleChange = () => (evt) => {\n        let value = evt.target.value;\n        let name = evt.target.name;\n        setMovie({\n            ...movie,\n            [name]: value,\n        });\n    }\n\n    const handleSubmit = (evt) => {\n        evt.preventDefault();\n        // do validation\n        let errors = [];\n        if (movie.title === \"\") {\n            errors.push(\"title\");\n        }\n\n        setErrors(errors)\n\n        if (errors.length > 0) {\n            return false;\n        }\n\n        // we passed, so post info\n        const data = new FormData(evt.target);\n        const payload = Object.fromEntries(data.entries());\n        const myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        myHeaders.append(\"Authorization\", \"Bearer \" + props.jwt);\n\n        const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n        headers: myHeaders,\n        };\n        fetch(`${process.env.REACT_APP_API_URL}/v1/admin/editmovie`, requestOptions)\n        .then((response) => response.json())\n        .then((data) => {\n            if (data.error) {\n                setAlert({\n                    alert: { type: \"alert-danger\", message: data.error.message},\n                })\n            } else {\n                props.history.push({\n                    pathname: \"/admin\",\n                });\n            }\n        });\n    }\n\n    const confirmDelete = (e) => {\n        confirmAlert({\n            title: \"Delete Movie?\",\n            message: \"Are you sure?\",\n            buttons: [\n              {\n                label: \"Yes\",\n                onClick: () => {\n                  // delete the movie\n                  const myHeaders = new Headers();\n                  myHeaders.append(\"Content-Type\", \"application/json\");\n                  myHeaders.append(\"Authorization\", \"Bearer \" + props.jwt);\n     \n                  fetch(\n                    `${process.env.REACT_APP_API_URL}/v1/admin/deletemovie/` +\n                      movie.id,\n                    {\n                      method: \"GET\",\n                      headers: myHeaders,\n                    }\n                  )\n                    .then((response) => response.json)\n                    .then((data) => {\n                      if (data.error) {\n                        setAlert({type: \"alert-danger\", message: data.error.message});\n                      } else {\n                        setAlert({type: \"alert-success\", message: \"Movie deleted!\"});\n                        props.history.push({\n                          pathname: \"/admin\",\n                        });\n                      }\n                    });\n                },\n              },\n              {\n                label: \"No\",\n                onClick: () => {},\n              },\n            ],\n          });\n    }\n\n    function hasError(key) {\n        return errors.indexOf(key) !== -1;\n    }\n\n    if (error !== null) {\n        return <div>Error: {error.message}</div>;\n    } else {\n        return (\n            <Fragment>\n              <h2>Add/Edit Movie</h2>\n              <Alert\n                alertType={alert.type}\n                alertMessage={alert.message}\n              />\n              <hr />\n              <form onSubmit={handleSubmit}>\n                <input\n                  type=\"hidden\"\n                  name=\"id\"\n                  id=\"id\"\n                  value={movie.id}\n                  onChange={movie.id}\n                />\n   \n                <Input\n                  title={\"Title\"}\n                  className={hasError(\"title\") ? \"is-invalid\" : \"\"}\n                  type={\"text\"}\n                  name={\"title\"}\n                  value={movie.title}\n                  handleChange={handleChange(\"title\")}\n                  errorDiv={hasError(\"title\") ? \"text-danger\" : \"d-none\"}\n                  errorMsg={\"Please enter a title\"}\n                />\n   \n                <Input\n                  title={\"Release Date\"}\n                  type={\"date\"}\n                  name={\"release_date\"}\n                  value={movie.release_date}\n                  handleChange={handleChange(\"release_date\")}\n                />\n   \n                <Input\n                  title={\"Runtime\"}\n                  type={\"text\"}\n                  name={\"runtime\"}\n                  value={movie.runtime}\n                  handleChange={handleChange(\"runtime\")}\n                />\n   \n                <Select\n                  title={\"MPAA Rating\"}\n                  name={\"mpaa_rating\"}\n                  options={mpaaOptions}\n                  value={movie.mpaa_rating}\n                  handleChange={handleChange(\"mpaa_rating\")}\n                  placeholder=\"Choose...\"\n                />\n   \n                <Input\n                  title={\"Rating\"}\n                  type={\"text\"}\n                  name={\"rating\"}\n                  value={movie.rating}\n                  handleChange={handleChange(\"rating\")}\n                />\n   \n                <TextArea\n                  title={\"Description\"}\n                  name={\"description\"}\n                  value={movie.description}\n                  rows={\"3\"}\n                  handleChange={handleChange(\"description\")}\n                />\n   \n                <hr />\n   \n                <button className=\"btn btn-primary\">Save</button>\n                <Link to=\"/admin\" className=\"btn btn-warning ms-1\">\n                  Cancel\n                </Link>\n                {movie.id > 0 && (\n                  <a\n                    href=\"#!\"\n                    onClick={() => confirmDelete()}\n                    className=\"btn btn-danger ms-1\"\n                  >\n                    Delete\n                  </a>\n                )}\n              </form>\n            </Fragment>\n          );\n    }\n}\n\nexport default EditMovieFunc;"]},"metadata":{},"sourceType":"module"}